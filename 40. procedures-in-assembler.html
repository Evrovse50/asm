<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
    <link rel="shortcut icon" href="logo.png" type="image/png">
    <title>Учебное по дисциплине "Системное программирование"</title>
</head>

<body onload="PriZagruzke()">
    <div class="wrapper">




        <div class="main-container">
            <div class="mainWrap">

                <a id="touch-menu" class="mobile-menu" href="#" onclick="oAdaptiv()">
                    <div class="buteer">
                        <div class="bar1"></div>
                        <div class="bar2"></div>
                        <div class="bar3"></div>
                    </div>
                    <i class="icon-reorder"></i>Список глав
                </a>
                <div id="main-topSpisok">
                <nav>
                    <ul class="menu" id="sub-menu">
                        <li>
                            <a href="index.html">Предисловие</a>
                        </li>

                        <li><a href="2. introduction.html">Введение</a>
                            <ul>
                                <li><a href="3. intro-cpu.html">Немного о процессорах</a></li>
                            </ul>
                        </li>
                        <li><a>Быстрый старт</a>
                            <ul>
                                <li style="z-index: 9;"><a href="4. start-first.html" style="z-index: 10;">Первая
                                        программа</a>
                                 
                                        <li><a href="5. start-emu8086.html">Emu8086</a></li>
                                        <li><a href="6. start-debug.html">Debug</a></li>
                                        <li><a href="7. start-asm.html">MASM, TASM и WASM</a>
                                            <ul>
                                                <li><a href="8. start-tasm.html">Ассемблирование в TASM</a></li>
                                                <li><a href="9. start-masm.html">Ассемблирование в MASM</a></li>
                                                <li><a href="10. start-wasm.html">Ассемблирование в WASM</a></li>
                                                <li style="z-index: 10;"><a href="11. start-run.html" >Выполнение программы</a></li>
                                                <li><a href="12. start-bat.html">Использование BAT-файлов</a></li>
                                            </ul>

                                        </li>
                                        <li style="z-index: 6;"><a href="13. start-hex.html" >Шестнадцатеричный редактор</a></li>
                                  
                                </li>


                               
                            </ul>
                        <li><a href="14. asm.html">Введение в ассемблер</a>
                            <ul>
                                <li style="z-index: 6;"><a href="15. asm-computer.html">Как устроен компьютер</a>
                                    <ul>
                                        <li style="z-index: 7;"><a href="16. asm-cpu.html"> Структура процессора</a></li>
                                        <li style="z-index: 7;"><a href="17. asm-cpu-registers.html"> Регистры процессора</a></li>
                                        <li style="z-index: 7;"><a href="18. asm-cycle-command.html"> Цикл выполнения команды</a></li>
                                        <li style="z-index: 7;"><a href="19. asm-memory.html"> Организация памяти</a></li>
                                        <li style="z-index: 7;"><a href="20. asm-real-mode.html"> Реальный режим</a></li>
                                        <li style="z-index: 7;"><a href="21. asm-protected-mode.html"> Защищённый режим</a></li>
                                    </ul>
                                </li>
                                <li style="z-index: 2;"><a href="22. asm-number-systems.html">Системы счисления</a>
                                    <ul>
                                        <li style="z-index: 7;"><a href="23. asm-binary-system.html">Двоичная система счисления</a></li>
                                        <li style="z-index: 1;"><a href="24. asm-hex-system.html"> Шестнадцатеричная система счисления</a></li>
                                        <li style="z-index: 7;"><a href="25. asm-octal-system.html"> Другие системы</a></li>
                                    </ul></li>
                                <li style="z-index: 1;"><a href="26. asm-data-presentation.html">Представление данных в памяти компьютера</a>
                                    <ul>
                                        <li style="z-index: 7;"><a href="27. asm-positive-numbers.html">Положительные числа</a></li>
                                        <li style="z-index: 7;"><a href="28. asm-negative-numbers.html">Отрицательные числа</a></li>
                                        <li style="z-index: 7;"><a href="29. asm-overflow.html">Что такое переполнение</a></li>
                                        <li style="z-index: 7;"><a href="30. asm-flags-register.html">Регистр флагов</a></li>
                                        <li style="z-index: 7;"><a href="31. asm-character-codes.html">Коды символов</a></li>
                                        <li style="z-index: 7;"><a href="39. bcd.html">Что такое BCD</a></li>
                                    </ul>
                                   
                                </li>

                               
                            </ul>
                            <li style="z-index: 7;"><a href="32. asm-real.html">Вещественные числа</a>
                                <ul>
                                    <li style="z-index: 7;"><a href="33. asm-real-first.html">Первая попытка</a></li>
                                    <li style="z-index: 7;"><a href="34. asm-real-normalization.html">Нормализованная запись числа</a></li>
                                    <li style="z-index: 7;"><a href="35. asm-real-frac.html">Преобразование дробной части в двоичную форму</a></li>
                                    <li style="z-index: 7;"><a href="36. asm-real-memory.html">Представление вещественных чисел в памяти компьютера</a></li>
                                    <li style="z-index: 7;"><a href="37. asm-real-fixed-point.html">Числа с фиксированной точкой</a></li>
                                    <li style="z-index: 7;"><a href="38. asm-real-floating-point.html">Числа с плавающей точкой</a></li>

                                </ul>
                            </li>
                            <li style="z-index: 7;"><a href="40. procedures-in-assembler.html">Процедуры в Ассемблере</a></li>
                        
                        </li>



                        <li style="z-index: 7;"><a href="Test.html">Тестирование</a></li>
                        <li><a href="39. bcd.html"> < </a></li>
                        
                    </ul>
                </nav>
            </div>
            </div>
            <div id="main-topSpisok2" style="display: none;">
                <nav>
                    <ul class="menu" id="sub-menu" style="display: block; left: 9px;">

                        <li>
                            <a href="index.html">Главная</a>
                        </li>
                        <li style="z-index: 7;"><a href="Test.html">Тестирование</a></li>
                        <li>
                            <a href="index.html">Предисловие</a>
                        </li>

                        <li><a href="2. introduction.html">Введение</a>
                            <ul style="left: 0px;">
                                <li><a href="3. intro-cpu.html">Немного о процессорах</a></li>
                            </ul>
                        </li>
                        <li><a>Быстрый старт</a>
                            <ul style="left: 0px;">
                                <li style="z-index: 9;"><a href="4. start-first.html" style="z-index: 10;">Первая
                                        программа</a>
                                 
                                        <li><a href="5. start-emu8086.html">Emu8086</a></li>
                                        <li><a href="6. start-debug.html">Debug</a></li>
                                        <li><a href="7. start-asm.html">MASM, TASM и WASM</a>
                                            <ul style="left: 0px;">
                                                <li><a href="8. start-tasm.html">Ассемблирование в TASM</a></li>
                                                <li><a href="9. start-masm.html">Ассемблирование в MASM</a></li>
                                                <li><a href="10. start-wasm.html">Ассемблирование в WASM</a></li>
                                                <li style="z-index: 10;"><a href="11. start-run.html" >Выполнение программы</a></li>
                                                <li><a href="12. start-bat.html">Использование BAT-файлов</a></li>
                                            </ul>

                                        </li>
                                        <li style="z-index: 6;"><a href="13. start-hex.html" >Шестнадцатеричный редактор</a></li>
                                  
                                </li>
                            </ul>
                        <li><a href="14. asm.html">Введение в ассемблер</a>
                            <ul style="left: 0px;">
                                <li style="z-index: 6;"><a href="15. asm-computer.html">Как устроен компьютер</a>
                                    <ul style="left: 0px;">
                                        <li style="z-index: 7;"><a href="16. asm-cpu.html"> Структура процессора</a></li>
                                        <li style="z-index: 7;"><a href="17. asm-cpu-registers.html"> Регистры процессора</a></li>
                                        <li style="z-index: 7;"><a href="18. asm-cycle-command.html"> Цикл выполнения команды</a></li>
                                        <li style="z-index: 7;"><a href="19. asm-memory.html"> Организация памяти</a></li>
                                        <li style="z-index: 7;"><a href="20. asm-real-mode.html"> Реальный режим</a></li>
                                        <li style="z-index: 7;"><a href="21. asm-protected-mode.html"> Защищённый режим</a></li>
                                    </ul>
                                </li>
                                <li style="z-index: 2;"><a href="22. asm-number-systems.html">Системы счисления</a>
                                    <ul style="left: 0px;">
                                        <li style="z-index: 7;"><a href="23. asm-binary-system.html">Двоичная система счисления</a></li>
                                        <li style="z-index: 1;"><a href="24. asm-hex-system.html"> Шестнадцатеричная система счисления</a></li>
                                        <li style="z-index: 7;"><a href="25. asm-octal-system.html"> Другие системы</a></li>
                                    </ul></li>
                                <li style="z-index: 1;"><a href="26. asm-data-presentation.html">Представление данных в памяти компьютера</a>
                                    <ul style="left: 0px;">
                                        <li style="z-index: 7;"><a href="27. asm-positive-numbers.html">Положительные числа</a></li>
                                        <li style="z-index: 7;"><a href="28. asm-negative-numbers.html">Отрицательные числа</a></li>
                                        <li style="z-index: 7;"><a href="29. asm-overflow.html">Что такое переполнение</a></li>
                                        <li style="z-index: 7;"><a href="30. asm-flags-register.html">Регистр флагов</a></li>
                                        <li style="z-index: 7;"><a href="31. asm-character-codes.html">Коды символов</a></li>
                                        <li style="z-index: 7;"><a href="39. bcd.html">Что такое BCD</a></li>
                                    </ul>
                                   
                                </li>

                               
                            </ul>
                            <li style="z-index: 7;"><a href="32. asm-real.html">Вещественные числа</a>
                                <ul style="left: 0px;">
                                    <li style="z-index: 7;"><a href="33. asm-real-first.html">Первая попытка</a></li>
                                    <li style="z-index: 7;"><a href="34. asm-real-normalization.html">Нормализованная запись числа</a></li>
                                    <li style="z-index: 7;"><a href="35. asm-real-frac.html">Преобразование дробной части в двоичную форму</a></li>
                                    <li style="z-index: 7;"><a href="36. asm-real-memory.html">Представление вещественных чисел в памяти компьютера</a></li>
                                    <li style="z-index: 7;"><a href="37. asm-real-fixed-point.html">Числа с фиксированной точкой</a></li>
                                    <li style="z-index: 7;"><a href="38. asm-real-floating-point.html">Числа с плавающей точкой</a></li>

                                </ul style="left: 0px;">
                            </li>
                            <li style="z-index: 7;"><a href="40. procedures-in-assembler.html">Процедуры в Ассемблере</a></li>
                        </li>
                    </ul>
                </nav>
            </div>
            <div class="content">

                <div class="nav">
                    <p>
                        <a href="39. bcd.html" style="float: left;margin-top: 40%;"><</a>
                        
                    </p>
                </div>
                <article>

                    <div id="contTxt">
<!--Текст страницы-->
<h1>Процедуры в Ассемблере</h1>

<p>
    Без использования подпрограмм крайне сложно создать какую-либо мало-мальски сложную программу. Особенно на языке
    ассемблера.
</p>

<p>
    Описание процедуры в Ассемблере выглядит примерно так:
</p>
<p></p>
<pre>
    <strong>Имя</strong> <strong style="color:red;">PROC </strong>
    
          ; здесь находится код
          ; процедуры ...
    
    <a>RET</a>
    <strong>Имя</strong> <strong style="color:red;">ENDP</strong></pre>
<p></p>
<p>
    <strong>Имя</strong> - это имя процедуры. Называйте как хотите. Только не вставляйте пробелы и другие служебные
    символы. Имя также не должно начинаться с цифры и должно быть уникальным. Имя должно быть одинаковым в начале и
    конце процедуры.
</p>
<p>
    <strong style="color:red;">PROC</strong> и <strong style="color:red;">ENDP</strong> - директивы компилятора, которые
    указывают компилятору на адрес процедуры. Между этими словами находится код процедуры.
</p>
<p>
    <strong>RET</strong> - уже знакомая нам команда, которая используется для возвращения в операционную систему, если
    она выполняется в программе. Если же она находится в процедуре, то она используется для возвращения в основную
    программу из процедуры.
</p>
<p>
    Ну вот, процедура написана. Осталось вызвать ее в нужном месте программы. Для этого используется инструкция CALL,
    после которой пишется имя процедуры. Вот так все просто оказалось.
</p>
<p>
    А теперь попробуем использовать полученные знания в примере, который мы
    рассматривали (без
    использования процедур).
    В этом примере мы выводили строку на экран. Напишем две процедуры на ассемблере - некое
    подобие <a>Write и
        WriteLn в Паскале</a>.
</p>
<p></p>
<pre>	.model	tiny
        .code
        ORG	100h             ;Начало СОМ-файла
            
    start:	
      <a>MOV</a>  DX, offset stroka1  ;Адрес строки записываем в DX    
      CALL Write 
      MOV  DX, offset stroka2  ;Адрес строки записываем в DX    
      CALL WriteLn 
      MOV  DX, offset stroka1  ;Адрес строки записываем в DX    
      CALL WriteLn 
      MOV  DX, offset stroka2  ;Адрес строки записываем в DX    
      CALL WriteLn
      
      RET                      ;Завершение СОМ-файла	
    
    ;Описание процедуры вывода строки
    Write PROC
      MOV  AH, 09h             
      INT  21h
      RET                     ;Завершение процедуры Write
    Write ENDP 
    
    ;Описание процедуры вывода строки с переводом строки
    WriteLn PROC
      MOV  AH, 09h             
      INT  21h  
      MOV DX, offset crlf	
      MOV AH, 09h		
      INT 21h
      RET                     ;Завершение процедуры WriteLn
    WriteLn ENDP
        
    stroka1 DB 'Line 1 $'     ;Строка для вывода	
    stroka2 DB 'Line 2 $'     ;Строка для вывода	
    crlf    DB 0Dh, 0Ah, '$'  ;Символы перевода строки   
    
      END 	start</pre>
<p></p>
<p>
    То, что выведет программа, вы видите на рисунке:
</p>
<p>
</p>
<center>
    <img border="0" width="353" src="http://av-assembler.ru/images/proc.png" alt="Процедуры в Ассемблере"
        title="Процедуры в Ассемблере">
</center>
<p></p>
<p>
    Как видите, сначала процедура Write выводит строку “Line 1” без перевода на новую строку. Поэтому строка “Line 2”
    выводится в той же строке. Ну а далее мы уже используем WriteLn, поэтому следующие строки выводятся с новой строки.
</p>
<p>
    А теперь представьте, как бы выглядел этот код, если бы мы не использовали процедуры - он занимал бы намного больше
    места.
</p>
<p>
    Описание процедур в исходном коде обычно выполняется после текста основной программы, но перед объявлением
    переменных.
</p>
<p>
    Параметры в процедуры обычно передаются через регистры и/или через глобальные переменные (как это сделано в нашем
    примере - через регистр DX в процедуру передаётся адрес выводимой строки, ну а сама строка объявлена как глобальная
    переменная).
</p>
<p>
    Процедуры могут быть также вложенными одна в другую. В этом случае команда RET вложенной процедуры передаёт
    управление не в основную программу, а в процедуру, из которой была вызвана вложенная процедура.
</p>
<p>
    Также во многих ассемблерах (например, в <a>MASM</a>) по
    умолчанию <a>метки</a> являются локальными.
    То есть если в процедуре будет метка, то она будет видима только в пределах этой процедуры.
</p>
<br>
</div>
                </article>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="wrapper3">
            <div class="footer_bot">
               
                <div class="footer_bot_cop">Учебное по дисциплине "Системное программирование"</div>

            </div>
        </div>
    </div>
</body>
</html>
